# 专注学习计时器

一款专为学习设计的桌面计时器应用，支持多种计时模式、数据统计和个性化设置。

## 功能特点

### ✨ 核心功能
- **可视化倒计时**: 美观的圆形进度条显示
- **多种计时模式**: 学习、休息等可自定义类型
- **智能提醒**: 音频提醒和弹窗通知
- **数据统计**: 学习时间统计和趋势分析
- **系统托盘**: 最小化到托盘，不打扰工作流

### 📊 统计功能
- 近7天学习时间折线图
- 日历热图显示每日学习情况
- 计时器类型使用统计
- 完成率趋势分析
- 数据导出和备份

### ⚙️ 个性化设置
- 自定义计时器类型和时长
- 个性化提醒音和通知方式
- 界面主题和显示选项
- 数据管理和隐私设置

## 项目结构

```
FocusTimer/
├── main.py                 # 程序入口
├── requirements.txt        # 依赖包
├── config/                 # 配置管理
│   ├── settings.py         # 设置管理
│   └── database.py         # 数据库操作
├── ui/                     # 用户界面
│   ├── main_window.py      # 主窗口
│   ├── timer_widget.py     # 计时器组件
│   ├── settings_widget.py  # 设置页面
│   └── stats_widget.py     # 统计页面
├── core/                   # 核心逻辑
│   ├── timer.py            # 计时器核心
│   ├── audio_manager.py    # 音频管理
│   └── data_manager.py     # 数据管理
└── resources/              # 资源文件
    ├── sounds/             # 音频文件
    ├── icons/              # 图标资源
    └── styles/             # 样式文件
```

## 开发进度

### ✅ 已完成
1. **项目架构设计** - 完成基础架构和目录结构
2. **配置管理系统** - 完成设置和数据库管理模块
3. **主窗口框架** - 完成主窗口和导航系统
4. **计时器核心** - 完成计时器逻辑和状态管理
5. **计时器界面** - 完成圆形进度条和控制面板

### 🚧 进行中
6. **设置页面** - 时间设置、提醒设置等界面
7. **统计页面** - 数据可视化和图表显示
8. **音频系统** - 提醒音播放和管理

### ✅ 已完成
9. **音频文件导入功能** - 支持导入自定义音频文件作为提醒音
10. **界面美化** - 样式优化和用户体验提升
11. **程序打包** - PyInstaller配置和exe生成
12. **数据迁移工具** - 完善数据导出和导入功能

## 快速开始

### 环境要求
- Python 3.8+
- Windows 10/11
- 8GB+ RAM (推荐)

### 安装步骤

1. **克隆项目**
```bash
git clone <项目地址>
cd FocusTimer
```

2. **创建虚拟环境**
```bash
python -m venv venv
venv\Scripts\activate
```

3. **安装依赖**
```bash
pip install -r requirements.txt
```

4. **运行程序**
```bash
python main.py
```

### 开发模式运行

如果您是开发者，可以按以下步骤运行：

1. 确保所有模块文件都已创建（参见项目结构）
2. 创建必要的目录：`data/`, `resources/sounds/`, `resources/icons/`
3. 运行 `python main.py`

## 使用说明

### 基本操作
1. **开始计时**: 选择类型和时长，点击"开始"
2. **暂停/恢复**: 计时过程中可暂停和恢复
3. **停止计时**: 可随时停止当前计时
4. **快速开始**: 使用预设的学习/休息模式

### 高级功能
- **自定义类型**: 在设置中添加自己的计时类型
- **数据统计**: 查看学习时间趋势和统计
- **系统托盘**: 最小化后在托盘中继续运行
- **数据导出**: 导出学习数据为JSON或CSV格式
- **数据迁移**: 使用脚本导出和导入所有数据
- **自定义提醒音**: 导入音频文件作为计时结束提醒音

### 音频文件导入功能

在设置页面的提醒设置中，您可以导入自定义音频文件作为计时结束的提醒音：

1. 点击"导入音频文件"按钮
2. 选择您想要导入的音频文件（支持.wav和.mp3格式）
3. 导入的音频文件会自动复制到程序的`resources/sounds`目录
4. 从下拉列表中选择您想要使用的音频文件
5. 启用声音提醒选项

导入的音频文件会在程序重启后仍然可用，您可以随时切换不同的提醒音。

## 技术栈

- **GUI框架**: PyQt5
- **数据存储**: SQLite3
- **数据可视化**: Matplotlib
- **音频播放**: Pygame
- **打包工具**: PyInstaller

## 数据迁移工具

项目包含了三个用于数据迁移的脚本：

1. `export_data.py` - 导出数据库中的所有数据为JSON格式
2. `export_sql.py` - 导出数据库中的所有数据为SQL格式
3. `import_data.py` - 从导出的文件中导入数据

### 使用方法

#### 导出数据为JSON格式

运行以下命令导出数据：

```
python export_data.py
```

导出的数据将保存在当前目录下的 `data_export_<timestamp>.json` 文件中。

#### 导出数据为SQL格式

运行以下命令导出数据：

```
python export_sql.py
```

导出的数据将保存在当前目录下的 `data_export_<timestamp>.sql` 文件中。

导出的SQL文件包含了完整的表结构定义和所有数据，可直接用于数据库恢复。

#### 导入数据

运行以下命令导入数据：

```
python import_data.py <导出的JSON文件路径>
```

例如：

```
python import_data.py data_export_20250826_003748.json
```

### 注意事项

- 导入脚本会检查记录是否已存在，如果存在则更新，否则插入新记录
- 脚本会自动处理数据库连接和事务
- 如果导入过程中出现错误，脚本会回滚所有更改

## 配置说明

程序会在 `data/settings.json` 中保存配置，主要配置项：

```json
{
  "timer": {
    "types": [
      {
        "id": "study",
        "name": "学习",
        "duration": 2700,
        "color": "#4CAF50"
      }
    ]
  },
  "notification": {
    "sound_enabled": true,
    "popup_enabled": true
  }
}
```

## 开发计划

### 版本 1.0 (基础版本)
- [x] 基础计时功能
- [x] 圆形进度显示
- [ ] 基础设置页面
- [ ] 简单统计功能

### 版本 1.1 (增强版本)
- [ ] 音频提醒系统
- [ ] 高级统计图表
- [ ] 主题切换
- [x] 数据导入/导出

### 版本 1.2 (专业版本)
- [ ] 番茄工作法集成
- [ ] 目标设置和跟踪
- [ ] 云端数据同步
- [ ] 多语言支持

## 贡献指南

欢迎提交Issue和Pull Request！

1. Fork 项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送分支 (`git push origin feature/AmazingFeature`)
5. 提交Pull Request

## 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件

## 联系方式

如有问题或建议，请通过以下方式联系：

- 提交 [Issue](项目地址/issues)
- 邮箱: your-email@example.com

---

**注意**: 这是一个正在开发中的项目，某些功能可能尚未完全实现。当前版本主要完成了核心架构和计时器基础功能。
